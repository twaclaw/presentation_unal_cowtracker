<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Presentation UNAL LoRa&reg;/LoRaWAN&reg;</title>

	<link rel="stylesheet" href="revealjs/dist/reset.css">
	<link rel="stylesheet" href="revealjs/dist/reveal.css">
	<link rel="stylesheet" href="revealjs/dist/theme/white.css" id="theme">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="revealjs/plugin/highlight/monokai.css" id="highlight-theme">
	<style>
		div.footer {
			margin-top: 600px;
			font-size: 20px;
		}

		.reveal h1,
		.reveal h2,
		.reveal h3,
		.reveal h4,
		.reveal h5 {
			text-transform: none;
		}
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<!-- ----- -->
			<!-- Beginning of slides -->
			<section>
				<section data-background-color="#FFFFFF">
					<h2>Examples of LoRaWAN&reg; Applications</h2>
					<p>Diego Sandoval</p>
					<p>Unal, 2021</p>
				</section>
			</section>

			<section>
				<section data-markdown data-background-color="#FFFFFF">
					<textarea data-template>
					## CV
					* [2002 - 2008] Electrical Engineering @ Unal
						* [2006] LABE ‚öΩ 
						* [2007 - 2010] CIF
					* [2010 - 2015] ETH
					* [2011 - 2019] Sustainable buildings
					* [2017 - 2019] **LoRa/LoRaWAN** - hobby
					* [2019 - ] <span class="fragment highlight-red">**LoRa&reg;/LoRaWAN&reg;**</span> - job
				</textarea>
				</section>


				<section data-markdown data-background-image="images/cloudia3.jpg">
					<textarea data-template>
					<br></br>
					<br></br>
					<br></br>
					<br></br>
					[https://cloudiaworld.github.io/](https://cloudiaworld.github.io/)
				</textarea>
				</section>

				<section data-markdown data-background-image="#404040">
					<textarea data-template>
					## Disclaimer \# 1
					* This is a pet project
				</textarea>
				</section>

			</section>

			<section data-markdown data-background-color="#404040">
				<textarea data-template>
					## Outline
					* LoRa&reg;/LoRaWAN&reg; recap ~ 10'
					* A cow-tracking application üêÆüêÆüêÆ  ~ 15'
					* Intermezzo ~ 3'
					* Getting started with LoRaWAN&reg; ~ 10'
					* Q&A
				</textarea>
			</section>

			<section>
				<section data-markdown data-background-color="#DAA520">
					<textarea data-template>
						## LoRa&reg;  and LoRAWAN&reg;
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Recap
						* [Gonzalos's presentation](https://speakerdeck.com/gonzalocasas/the-road-to-open-networks)
						* [What are LoRa and LoRaWAN?](https://lora-developers.semtech.com/library/tech-papers-and-guides/lora-and-lorawan/)
						* [What is LoRaWan?](https://reference.digilentinc.com/reference/programmable-logic/pynq-z1/reference-manual)
						* [LoRa Alliance&reg;](https://lora-alliance.org/)
                    </textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Difference between LoRa and LoRaWAN
						<img data-src="https://lora-developers.semtech.com/uploads/documents/images/Technology_stack.png">

						Note:

						LoRaWAN specification, industry standard

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
					## Wireless technologies
					<img data-src="images/wireless.png" height="300">

					* $\uparrow R$: long range
					* $\uparrow B$: high bandwidth
					* $\downarrow C$: low power consumption (cost)
				</textarea>
				</section>


				<section data-markdown>
					<textarea data-template>
						## (Typical) LoRaWAN network implementation

						<img data-src="https://lora-developers.semtech.com/uploads/documents/images/Typical_Network.png">

						[Source: Semtech](https://lora-developers.semtech.com/library/tech-papers-and-guides/lora-and-lorawan/)

						Note:

						Device classes

						1-gateway 1000's of devices

					</textarea>
				</section>

				<section data-background-image="images/lorawan_network0.png" data-background-size="contain"
					data-markdown data-transition="fade">
					<textarea data-template>
					<br></br>
					<br></br>
					[Source: TTN](www.thethingsnetwork.org)
				</textarea>
				</section>

				<section data-background-image="images/lorawan_network1.png" data-background-size="contain"
					data-markdown data-transition="fade">
				</section>

				<section data-background-image="images/lorawan_network2.png" data-background-size="contain"
					data-markdown data-transition="fade">
					<textarea data-template>
					## Infrastructure ownership
					* Infrastructure as a service: operator
					* Private network
					* Open-source: owned by the community
					* A hybrid model
				</textarea>
				</section>

				<section data-markdown data-background-image="images/ttn-map-1.png" data-background-size="contain">
					<textarea data-template>

						<br></br>
						<br></br>
						<br></br>
						<br></br>
						<br></br>
						[TTN map](https://www.thethingsnetwork.org/map)
					</textarea>
				</section>

				<section data-background-image="images/ttn-map-2.png" data-background-size="contain">
				</section>

				<section data-background-image="images/ttn-map-3.png" data-background-size="contain">
				</section>

				<section data-background-color="#000000" data-background-image="images/coffee.jpg">
					<h1>?</h1>
				</section>



			</section>

			<section>
				<section data-markdown data-background-color="#228B22">
					<textarea data-template>
						## A üêÑ-tracking application implementing LoRaWAN
					</textarea>
				</section>
				<section data-markdown data-background-image="images/malaga.png" data-background-size="contain">
					<textarea data-template>
					</textarea>
				</section>
				<section data-markdown data-background-image="images/pangote1.png" data-background-size="contain">
					<textarea data-template>
					</textarea>
				</section>
				<section data-markdown data-background-image="images/pangote3.png">
					<textarea data-template>
						Note:

						Forest

						Interest in sustainability

						conservation agriculture
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Disclaimer \# 2

						I think cattle-raising, at least in its current form, is not sustainable

						Note:
						Silvopastoril
					</textarea>
				</section>
				<section data-markdown data-background-image="images/pangote2.png">
					<textarea data-template>
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						#### Issues / Requirements

						* Remote location, difficult access 
						* Cows can roam into the forest
						* Establish timely when a cow requires assistance

						Note:

						Movement patterns

						Bebederos

					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Architecture

						<img data-src="images/cows_lorawan.png" height="300">

						Note:

						Tracker GPS
						
						modified firmware

						Show TTN console
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Beta-testing
						<img data-src="images/canela.png" height="600">
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Production

						<img data-src="images/lola.jpeg">
					</textarea>
				</section>

				<section data-markdown data-background-image="images/tower2.png" data-background-size="contain">
				</section>

				<section data-markdown data-background-image="images/panel1.jpeg" data-background-size="contain">
				</section>

				<section data-markdown data-background-image="images/installation1.jpeg" data-background-size="contain">
				</section>

				<section data-markdown data-background-image="images/installation2.jpeg" data-background-size="contain">
				</section>

				<section data-markdown data-background-size="contain" data-background-image="images/tower3.jpeg">
				</section>


				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						#### [github: backend](https://github.com/twaclaw/cowtracker_app)

						* Get messages from TTN
						* Store measures to a database
						* Serve frontend endpoints
						* Check if a cow is moving
						* Check if messages are being received
						* Check if a particular tracker is sending data
						* Send emails
					</textarea>
				</section>


				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						#### [github: frontend](https://github.com/twaclaw/cowtracker_ui)

						* Visualization
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						<img data-src="images/honorio1.png" height="600">
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						<img data-src="images/honorio2.png" height="600">

						Note:

						Show application pangote

						Problems in engineering are unavoidable

						It is important to understand them

						I show you the symptoms, and you try to come up with a diagnosis
	
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						<img data-src="images/goya1.png" height="600">
				</textarea>
				</section>


				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						<img data-src="images/goya2.png" height="700">
					</textarea>
				</section>


				<section data-markdown>
					<textarea data-template>
						## Happy cows üêÆüêÆüêÆ							
						#### Possible improvements

						<img data-src="https://www.semtech.com/uploads/products/product/LoRa-Edge-LR1110.jpg" height="300">
						
						[Source: Semtech](https://www.semtech.com/products/wireless-rf/lora-transceivers/lr1110)
					</textarea>
				</section>

				<section data-background-color="#000000" data-background-image="images/coffee.jpg">
					<h1>?</h1>
				</section>



			</section>

			<section>
				<section data-markdown data-background-color="#00BFFF">
					<textarea data-template>
						## Intermezzo
						### The democratization of knowledge
					</textarea>
				</section>

				<section data-markdown>
					<textarea data-template>
						* The [information source](https://en.wikipedia.org/) I used to prepare some of the slides
						* The [framework](https://github.com/hakimel/reveal.js/) I used to create them	
						* The [text editor](https://github.com/Microsoft/vscode) I used to type them
						* The [web browser](https://github.com/mozilla) am using to display the presentation
						* [This presentation itself](https://github.com/twaclaw/presentation_unal_cowtracker)
						* All code examples, including [basicmac](https://github.com/mkuyper/basicmac) and [ttn](https://github.com/TheThingsNetwork)
						<span class="fragment fade-in">
						<p class="fragment grow highlight-red">are all open-source!!!</p>
						</span>
					</textarea>
				</section>

				<section>
					<img src="images/software-libre.png" style="border:0;background:none">
				</section>



				<section
					data-background-image="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/121212_2_OpenSwissKnife.png/1920px-121212_2_OpenSwissKnife.png"
					data-background-size="contain">
					<div style="margin-top: 630px;font-size:20px;color:white;">Source: Wikipedia</div>
				</section>


				<section data-markdown
					data-background-image="https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Houghton_EC.B1328.620ib_-_Novum_organum_scientiarum.jpg/1280px-Houghton_EC.B1328.620ib_-_Novum_organum_scientiarum.jpg"
					data-background-opacity="0.2" data-background-size="contains">
					<textarea data-template>
					## Scientia potentia est

					* *The New Instrument* Francis Bacon, 1620
					* *Leviathan* Thomas Hobbes, 1668

					<!-- ### Knowledge is power -->
				</textarea>
				</section>
				<section data-markdown
					data-background-image="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Leviathan_by_Thomas_Hobbes.jpg/1280px-Leviathan_by_Thomas_Hobbes.jpg"
					data-background-opacity="0.2" data-background-size="contains">
					<textarea data-template>
						## The discovery of ignorance
						<br>
							Modern science paradigm:
						<br>
						<br>

						* *Ignoramus*: we do not know
						* We have to obtain knowledge by gathering observations and using mathematical tools
						* The acquisition of `new powers`: new technologies
						<br>
						<p style="font-size:10pt">Source: Harari, Sapiens</p>
					</textarea>
				</section>
			</section>

			<section>
				<section data-markdown data-background-color="#F4A460">
					<textarea data-template>
						## Getting started with LoRaWAN
					</textarea>
				</section>

				<section data-background-image="images/lorawan_network1.png" data-background-size="contain"
					data-markdown data-transition="fade">
				</section>

				<section data-markdown data-background-image="images/lorawan_network2.png"
					data-background-size="contain">
					<textarea data-template>
						## Demo

						<img data-src="images/starting_with_lorawan.png">

						- [B-L072Z-LRWAN1 STM32L0 Discovery kit](https://www.st.com/en/evaluation-tools/b-l072z-lrwan1.html#)
						- [Mini Hub](https://lora-alliance.org/lora_products/mini-hub-wall-plug-gateway/) ([basicstation](https://github.com/lorabasics/basicstation))

						Note:

						Tranceiver, modem
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## End device: [B-L072Z-LRWAN1](https://www.st.com/en/evaluation-tools/b-l072z-lrwan1.html#)

						<img data-src="images/radio.png" height="400">

						[Source: st.com](https://www.st.com/resource/en/user_manual/dm00329995-discovery-kit-for-lorawan-sigfox-and-lpwan-protocols-with-stm32l0-stmicroelectronics.pdf)

					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## End device: [basicmac programming model](https://doc.sm.tc/mac/programming.html)

						<img data-src="https://doc.sm.tc/mac/_images/lmic-arch.svg">

						Note:

						OS and device

						100ks devices

						history

					</textarea>
				</section>


				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## It's console time ...
					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## End device: [basicmac.io](https://basicmac.io)
						[Getting started](https://basicmac.io/guide/gettingstarted.html)
				
						<pre>
							<code data-trim data-noescape console>
								# clone the repository including submodules
								git clone --recurse-submodules https://github.com/mkuyper/basicmac.git basicmac

								cd basicmac

								# create a virtual environment and activate it
								python -m  venv venv  # or virtualenv venv depending on the distro
								source venv/bin/activate
							
								# install Python dependencies 
								# can also be pip3 depending on the distro
								pip install -r basicloader/requirements.txt
								pip install -r ./requirements.txt
								pip install pyyaml # an additional dependency
							</code>
						</pre>
					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## End device: [basicmac.io](https://basicmac.io)
						Compiling
				
						<pre>
							<code data-trim data-noescape bash>
								cd projects/ex-join
								VARIANT=eu868 make
								make loadbl # bootloader
								make load  # application
							</code>
						</pre>
					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## End device: personalization

						* Over the air activation

							* *DevEUI* End device identifier
							* *JoinEUI* Join-Server identifier
							* *AppKey* Application Key
				
						<pre>
							<code data-trim data-noescape bash>
								minicom  -D /dev/ttyACM0  -b 2000000
							</code>
						</pre>

						Note:

						EEPROM
					</textarea>
				</section>

				<section data-markdown data-background-image="images/minicom1-off.png" data-background-size="contain"
					data-background-color="#000000">
					<textarea data-template>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>
						<br>

						See [here](https://basicmac.io/guide/gettingstarted.html#personalization) how the personalization is done.

					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## Application side

						<img data-src="images/ttn-key.png" height="200">

						<pre>
							<code data-trim data-noescape bash>
export LNS_KEY="NNSXS.TFEB74W7JUEQUK4..."

mosquitto_sub -h eu1.cloud.thethings.network \
-t 'v3/unal@ttn/devices/+/up' \
-u "unal@ttn" \
-F "%p" \
-P ${LNS_KEY} |jq '.uplink_message.frm_payload | @base64d' 
							</code>
						</pre>
					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## Simulating a temperature reading
						#### Device side

						<pre>
							<code data-trim data-noescape c>
								// projects/ex-join/main.c

								static bool tx (lwm_txinfo* txinfo) {
									txinfo->data[0] = rand() % 20 + 200;
									txinfo->dlen = 1;
									txinfo->port = 15;
									txinfo->txcomplete = txc;
									return true;
								}
							</code>
						</pre>
					</textarea>
				</section>

				<section data-markdown data-background-color="#000000">
					<textarea data-template>
						## Simulating a temperature reading
						#### Application side

						<pre>
							<code data-trim data-noescape bash>

mosquitto_sub -h eu1.cloud.thethings.network \
-t 'v3/unal@ttn/devices/+/up' \
-u "unal@ttn" -P $LNS_KEY  \
-F "%p"  |jq '.uplink_message.frm_payload' \
-r --unbuffered \
| awk '{cmd="base64 -d|od -t d2 -An"; print $0|cmd;close(cmd)};' \
| ttyplot

							</code>
						</pre>
					</textarea>
				</section>
				<section data-background-color="#000000" data-background-image="images/coffee.jpg">
					<h1>?</h1>
				</section>
			</section>


		</div>
	</div>

	<script src="revealjs/dist/reveal.js"></script>
	<script src="revealjs/plugin/notes/notes.js"></script>
	<script src="revealjs/plugin/markdown/markdown.js"></script>
	<script src="revealjs/plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			progress: false,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
	<script src="revealjs/plugin/math/math.js"></script>
	<script>
		Reveal.initialize({
			math: {
				mathjax: 'https://cdn.jsdelivr.net/gh/mathjax/mathjax@2.7.8/MathJax.js',
				config: 'TeX-AMS_HTML-full',
				// pass other options into `MathJax.Hub.Config()`
				TeX: { Macros: { RR: "{\\bf R}" } },
			},
			plugins: [RevealMath]
		});
	</script>
</body>

</html>